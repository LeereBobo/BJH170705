<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#wrap {
				width: 600px;
				height: 400px;
				border: 1px solid gray;
				box-shadow: 0 0 2px gray;
				margin: 0 auto;
				position: relative;
			}
			
			#content {
				width: 600px;
				height: 390px;
			}
			
			#stone {
				width: 100px;
				height: 10px;
				background-color: cornflowerblue;
				position: absolute;
				left: 0;
				bottom: 0;
			}
			
			#qiu {
				width: 10px;
				height: 10px;
				background-color: red;
				position: absolute;
				left: 0;
				bottom: 10px;
			}
			
			.zk {
				width: 60px;
				height: 20px;
				background-color: green;
				border-radius: 5px;
				position: absolute;
			}
		</style>
	</head>

	<body>
		<div id="wrap">
			<div id="content">
				<div id="qiu">

				</div>
			</div>

			<div id="stone"></div>
		</div>
	</body>

	<script type="text/javascript">
		var wrap = document.getElementById("wrap");
		var stone = document.getElementById("stone");
		var qiu = document.getElementById("qiu");
		var content = document.getElementById("content");
		var speedX = 1;
		var speedY = -3;
		createZk();

		function createZk() {
			for (var i = 0; i < wrap.offsetWidth / 100 - 1; i++) {
				for (var j = 0; j < 3; j++) {
					var zk = document.createElement("div");
					content.appendChild(zk);
					zk.className = "zk";
					zk.style.left = i * 100 + 20 + "px";
					zk.style.top = j * 40 + 20 + "px";
				}
			}
		}
		//下方小块的键盘事件
		key();
		function key() {
			window.onkeydown = function(ev) {
				var e = ev || window.event;
				switch (e.keyCode) {
					case 37:
						stone.judge = 1;
						break;
					case 39:
						stone.judge = 2;
						break;
					default:
						break;
				}
				window.onkeyup = function(ev) {
					var ev = ev || window.event;
					switch (e.keyCode) {
						case 37:
							stone.judge = 0;
							break;
						case 39:
							stone.judge = 0;
							break;
						default:
							break;
					}
				}
				panduan();
				
			}
		}

		function panduan() {
			clearInterval(stone.timer);
			stone.timer = setInterval(function() {
				if (stone.judge == 1) {
					stone.style.left = stone.offsetLeft - 5 + "px";
				}
				if (stone.judge == 2) {
					stone.style.left = stone.offsetLeft + 5 + "px";
				}
				xianzhi();
			}, 20);
		}
		
		function xianzhi(){
			if (stone.offsetLeft < 0) {
				stone.style.left = 0;
			}
			if (stone.offsetLeft > wrap.offsetWidth - stone.offsetWidth) {
				stone.style.left = wrap.offsetWidth - stone.offsetWidth + "px";
			}
		
		}
		
		//小球运动
		qiurun();
		function qiurun(){
			qiu.timer = setInterval(function(){
				qiu.style.left = qiu.offsetLeft + speedX + "px";
				qiu.style.top = qiu.offsetTop + speedY + "px";
				qiupanduan();
			},20);
		}
		//判断四个方向的碰撞
		function qiupanduan(){
			if (qiu.offsetLeft <0) {
				speedX = 1;
			}
			if (qiu.offsetLeft > wrap.offsetWidth - qiu.offsetWidth) {
				speedX = -1;
			}
			if (qiu.offsetTop < 0) {
				speedY = 3
			}
			if (qiu.offsetTop > content.offsetHeight - qiu.offsetHeight) {
				if (qiu.offsetLeft < stone.offsetLeft - qiu.offsetWidth || qiu.offsetLeft > stone.offsetLeft + stone.offsetWidth) {
					alert("游戏结束");
					clearInterval(qiu.timer);
				}else{
					speedY = -3;
				}
			}
		}
		
	</script>

</html>