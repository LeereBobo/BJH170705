<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			
			#wrap {
				overflow: hidden;
			}
			.small {
				float: left;
				width: 400px;
				height: 400px;
				background: url(0.jpg) no-repeat;
				position: relative;
				background-size: 100% 100%;
			}
			.big {
				float: left;
				display: none;
				width: 400px;
				height: 400px;
				background: url(0.jpg) no-repeat;
				background-size: 1600px 1600px;
			}
			
			.mask {
				display: none;
				width: 100px;
				height: 100px;
				background-color: white;
				opacity: 0.5;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="wrap">
			<div class="small">
				<div class="mask">
					
				</div>
			</div>
			<div class="big">
				
			</div>
			
			
			
		</div>
		
	</body>
	
	<script src="jquery.js.js"></script>
	<script type="text/javascript">
		$(".small").mouseover(function(){
			$(".mask").show();
			$(".big").show();
			$(this).mousemove(function(ev){
				var x = ev.clientX - $(".mask").width() / 2 - $(this).offset().left;
				var y = ev.clientY - $(".mask").height() / 2 - $(this).offset().top;
				if (x < 0){
					x = 0;
				}
				if (x > $(this).width() - $(".mask").width()) {
					x = $(this).width() - $(".mask").width();
				}
				if (y < 0){
					y = 0;
				}
				if (y > $(this).height() - $(".mask").height()) {
					y = $(this).height() - $(".mask").height();
				}
				$(".mask").css({left:x,top:y})
				
				//修改大图
				var scale = $(".big").width()/ $(".mask").width();
//				console.log(scale);
				var bigX = x * scale;
				var bigY = y * scale;
//				console.log(bigX);
				$(".big").css({backgroundPosition:-bigX+"px " +(-bigY) +"px"})
				
				
			})
		})
		
		$(".small").mouseout(function(){
			$(".mask").hide();
			$(".big").hide();
		})
	</script>
	
</html>
